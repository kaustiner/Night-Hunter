-- GUI Setup
local ScreenGui = Instance.new("ScreenGui", game.Players.LocalPlayer:WaitForChild("PlayerGui"))
local Button = Instance.new("TextButton", ScreenGui)

Button.Size = UDim2.new(0, 200, 0, 50)
Button.Position = UDim2.new(0.5, -100, 0.9, -25)
Button.Text = "Alimentar Fogueira"
Button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Button.TextColor3 = Color3.fromRGB(255, 255, 255)
Button.Font = Enum.Font.SourceSansBold
Button.TextSize = 20
Button.Active = true
Button.Draggable = true

-- Servi√ßos e vari√°veis
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

local startDragRemote = ReplicatedStorage.RemoteEvents.RequestStartDraggingItem
local storeRemote = ReplicatedStorage.RemoteEvents.RequestBagStoreItem
local dropRemote = ReplicatedStorage.RemoteEvents.RequestBagDropItem

local executando = false

-- Itens permitidos como combust√≠vel
local itensCombustivel = {
    ["Coal"] = true,
    ["Fuel Canister"] = true,
    ["Oil Barrel"] = true
}

-- Coordenadas da fogueira
local posFogueira = Vector3.new(0.0, 20.0, -0.0)

-- Detecta qualquer saco v√°lido no invent√°rio
local function encontrarSaco()
    for _, item in pairs(player.Inventory:GetChildren()) do
        if item:FindFirstChild("Sack") then
            return item
        end
    end
    return nil
end

-- Dropa todos os itens do "Old Sack"
local function droparItensDoSaco()
    local inventario = player:WaitForChild("Inventory")
    local oldSack = inventario:FindFirstChild("Old Sack") or inventario:FindFirstChild("OldSack") or inventario:FindFirstChildWhichIsA("Folder")

    if oldSack then
        for _, item in pairs(oldSack:GetChildren()) do
            if item:IsA("Instance") then
                dropRemote:FireServer(oldSack, item, true)
                print("üî• Combust√≠vel dropado:", item.Name)
                task.wait(0.2) -- intervalo entre cada drop
            end
        end
    else
        warn("‚ùå Saco n√£o encontrado ou inv√°lido.")
    end
end

-- Fun√ß√£o principal
local function AlimentarFogueira()
    if executando then return end
    executando = true

    local saco = encontrarSaco()
    if not saco then
        warn("‚ùå Nenhum saco encontrado.")
        executando = false
        return
    end

    -- Teleporta para cada item permitido, coleta e volta
    local coletados = 0
    for _, item in pairs(workspace.Items:GetChildren()) do
        if coletados >= 5 then break end

        if itensCombustivel[item.Name] and item:IsA("Model") and item.PrimaryPart then
            -- Teleporta 30m acima do item
            local posItem = item.PrimaryPart.Position
            humanoidRootPart.CFrame = CFrame.new(posItem + Vector3.new(0, 70, 0))
            task.wait(0.2)

            -- Simula coleta
            startDragRemote:FireServer(item)
            task.wait(0.2)
            storeRemote:InvokeServer(saco, item)
            task.wait(0.2)

            -- Volta imediatamente para a fogueira
            humanoidRootPart.CFrame = CFrame.new(posFogueira)
            task.wait(0.3)

            coletados += 1
        end
    end

    -- Dropa os itens coletados na fogueira
    droparItensDoSaco()

    executando = false
end

-- Conecta bot√£o √† fun√ß√£o
Button.MouseButton1Click:Connect(AlimentarFogueira)
